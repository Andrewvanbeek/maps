<!DOCTYPE html>
<html>
<head>
<style>
#map {
height: 400px;
width: 100%;
}
</style>
</head>
<body>
<h3>My Google Maps Demo</h3>
<div id="map"></div>
<script>
function initMap() {
var uluru = {lat: 40, lng: -87.6298};
var map = new google.maps.Map(document.getElementById('map'), {
  zoom: 4,
  center: uluru
});

<% @positions.each do |position| %>
  <% p position.title %>
  var test = <%= position.title %>
  var uluru = {lat: <%= position.latitude %>, lng: <%= position.longitude %>}
  var marker = new google.maps.Marker({
    position: uluru,
    map: map,
    title: '<%= position.title %>',
  });
  google.maps.event.addListener(marker, 'click', function() {
    alert(this.title + "\n" + this.comment);
});

  <% end  %>

}
</script>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDggcG0_ElbSJjrcvr00Mu09pt21JG1elA&callback=initMap">
</script>
</body>
</html>



